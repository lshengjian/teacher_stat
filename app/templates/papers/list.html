{% extends 'base.html' %}

{% block title %}论文列表{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>论文列表</h2>
    <a href="{{ url_for('papers.paper_add') }}" class="btn btn-primary mb-3">添加论文</a>
    
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>序号</th>
                    <th>论文标题</th>
                    <th>作者</th>
                    <th>期刊</th>
                    <th>论文级别</th>
                    <th>发表日期</th>
                    <th>通讯作者</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for paper in papers %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ paper.title }}</td>
                    <td>{{ paper.teacher.name if paper.teacher else '未设置' }}</td>
                    <td>{{ paper.journal or '-' }}</td>
                    <td>{{ paper.paper_level.name if paper.paper_level else '未设置' }}</td>
                    <td>{{ paper.publish_date.strftime('%Y-%m-%d') if paper.publish_date else '-' }}</td>
                    <td>{{ '是' if paper.is_corresponding else '否' }}</td>
                    <td>
                        <a href="{{ url_for('papers.paper_edit', id=paper.id) }}" class="btn btn-warning btn-sm">编辑</a>
                        <a href="{{ url_for('papers.paper_delete', id=paper.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('确定要删除吗？')">删除</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}