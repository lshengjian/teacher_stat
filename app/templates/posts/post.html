{% extends "base.html" %}

{% block title %}{{ post.title }} - Flask博客{% endblock %}

{% block content %}
    <div class="post">
        <h1 class="title">{{ post.title }}</h1>
        <div class="is-size-7 text-gray-500 mb-3">
            <span>作者: <a href="{{ url_for('posts.user_posts', username=post.author.username) }}">{{ post.author.username }}</a></span>
            <span> · </span>
            <span>发布时间: {{ post.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</span>
            {% if post.updated_at != post.created_at %}
                <span> · </span>
                <span>更新时间: {{ post.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</span>
            {% endif %}
        </div>
        <div class="content mb-6">
            {{ post.content|safe }}
        </div>
        {% if current_user == post.author %}
            <div class="field is-grouped">
                <div class="control">
                    <a href="{{ url_for('posts.edit_post', post_id=post.id) }}" class="button is-info">编辑</a>
                </div>
                <div class="control">
                    <form action="{{ url_for('posts.delete_post', post_id=post.id) }}" method="POST">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" class="button is-danger" onclick="return confirm('确定要删除这篇文章吗？')">删除</button>
                    </form>
                </div>
            </div>
        {% endif %}
    </div>
    <a href="{{ url_for('main.index') }}" class="button is-secondary mt-4">返回首页</a>
{% endblock %}